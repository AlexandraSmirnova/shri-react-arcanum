# shri-react-arcanum

React приложение, которое показывает структуру файлов и директорий репозитория.


## Сборка и запуск

### Сборка приложения
```
yarn
yarn build:server
yarn build:client
```

### Запуск приложения
``` 
yarn start:server
```
Приложение запустится на порту localhost:3030

### Запуск сервера с api
Отдельно нужно будет еще запустить сервер с api:

```
git clone git@github.com:AlexandraSmirnova/shri-nodejs.git
yarn
yarn start <path_to_dir>
```
В <path_to_dir> нужно указать абсолютный путь до директории с репозиториями.
Сервер с api запустится на порту localhost:3000

<b>Для стабильности тестов нужно указать пустую папку, так репозитории будут скачиваться в нее для проверки</b>


### Запуск тестов

1. Убедиться, что Selenium-standalone установлен глобально
2. Поднять приложение по инструкции выше
3. Запустить тесты
```
    yarn test
```


### Отчет о переводе по ts.
Одна из трудностей, с которой столкнулась, это типизация action в редьюсерах.
Сначала, пыталась использовать AnyAction, затем Action из Redux, и в итоге остановилась на библиотеке typesafe-actions.
Какой способ их типизации наиболее правильный?

Еще одна проблема, которую пришлось решить не очень красиво. В файле RepositoryTable ts ругалось на такой код:
```js
    getTableCellItem = (item: React.ReactNode, index: number) => ({
        content: item,
        className: extraCellClassNames.hasOwnProperty(index)
            ? extraCellClassNames[index] : '',
    })
```
Тип у extraCellClassNames такой:
```js
const extraCellClassNames: {
    2: string;
    4: string;
}
```
В общем для некоторых индексов, из этого объекта брались значения. И не смотря на проверку на наличие ключа в объекте, ts ругался.
Решила не очень хорошей проверкой:
```
index == 2 || index == 4 ? exrtraCellClassNames[index] : '',
```
Будет очень здорово, если подскажите, как все-таки правильно нужно было написать в таком случае.

Вообще самым трудным оказался перевод файлов, отвечающих за redux-store, остальной перевод не вызвал сильных трудностей.
В целом ts понравился, было исправлено несколько ошибок (например, в Breadcrumbs сравнение строки и массива строк). 
Код становится надежней, поэтому PR решено вливать.

